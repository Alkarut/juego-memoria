<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>CLEANMANT</title>

<link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">

<style>
body{
    margin:0;
    background:linear-gradient(black,#0a0a2a);
    color:white;
    text-align:center;
    font-family:'Press Start 2P', cursive;
}
canvas{
    display:none;
    background:#111;
    border:4px solid cyan;
    box-shadow:0 0 20px cyan;
}
button{
    padding:15px;
    font-family:'Press Start 2P', cursive;
    background:cyan;
    border:none;
    cursor:pointer;
}
h1{
    color:cyan;
}
</style>
</head>
<body>

<div id="menu">
    <h1>ðŸ§½ CLEANMANT âš¡</h1>
    <button onclick="startGame()">JUGAR</button>
</div>

<canvas id="game" width="400" height="500"></canvas>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

let level = 1;
let gameRunning = false;

let sponge = {x:200,y:420,size:50};
let dust = [];
let laserX = 0;

function createDust(amount){
    dust = [];
    for(let i=0;i<amount;i++){
        dust.push({
            x:Math.random()*350+20,
            y:Math.random()*350+60,
            r:Math.random()*8+5
        });
    }
}

function startGame(){
    document.getElementById("menu").style.display="none";
    canvas.style.display="block";
    gameRunning = true;
    level = 1;
    createDust(25);
}

canvas.addEventListener("mousemove", function(e){
    sponge.x = e.offsetX - 25;
    sponge.y = e.offsetY - 25;
});

canvas.addEventListener("touchmove", function(e){
    let rect = canvas.getBoundingClientRect();
    sponge.x = e.touches[0].clientX - rect.left - 25;
    sponge.y = e.touches[0].clientY - rect.top - 25;
});

function drawComputer(){
    ctx.fillStyle="#222";
    ctx.fillRect(50,80,300,300);
    ctx.fillStyle="#333";
    ctx.fillRect(80,120,240,200);
}

function drawHeatsink(){
    ctx.fillStyle="#555";
    for(let i=0;i<10;i++){
        ctx.fillRect(80+i*25,120,15,200);
    }
}

function drawLaser(){
    ctx.strokeStyle="red";
    ctx.lineWidth=4;
    ctx.shadowBlur=15;
    ctx.shadowColor="red";
    ctx.beginPath();
    ctx.moveTo(laserX,0);
    ctx.lineTo(laserX,500);
    ctx.stroke();
    ctx.shadowBlur=0;
}

function drawSponge(){
    ctx.fillStyle="yellow";
    ctx.beginPath();
    ctx.ellipse(sponge.x+25,sponge.y+25,30,20,0,0,Math.PI*2);
    ctx.fill();
    ctx.fillStyle="orange";
    ctx.fillRect(sponge.x+5,sponge.y+20,40,10);
}

function checkClean(){
    dust = dust.filter(d=>{
        let dx = sponge.x+25 - d.x;
        let dy = sponge.y+25 - d.y;
        return Math.sqrt(dx*dx+dy*dy) > 30;
    });

    if(dust.length===0){
        level++;
        if(level===2) createDust(35);
        else if(level===3) createDust(45);
        else{
            alert("Â¡GANASTE CLEANMANT!");
            location.reload();
        }
    }
}

function draw(){
    if(!gameRunning) return;

    ctx.clearRect(0,0,400,500);

    if(level===1){
        drawComputer();
    }else if(level===2){
        drawHeatsink();
    }else{
        drawComputer();
        drawLaser();
        laserX += 3;
        if(laserX>400) laserX=0;

        if(sponge.x < laserX+5 && sponge.x+50 > laserX-5){
            alert("âš¡ TE DIO CORRIENTE âš¡");
            location.reload();
        }
    }

    ctx.fillStyle="brown";
    dust.forEach(d=>{
        ctx.beginPath();
        ctx.arc(d.x,d.y,d.r,0,Math.PI*2);
        ctx.fill();
    });

    drawSponge();
    checkClean();

    ctx.fillStyle="cyan";
    ctx.fillText("Nivel "+level,10,30);
}

setInterval(draw,30);
</script>

</body>
</html>
