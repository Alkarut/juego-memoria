<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>CLEANMANT</title>

<link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">

<style>
body{
    margin:0;
    background:radial-gradient(circle,#0f2027,#203a43,#2c5364);
    color:white;
    text-align:center;
    font-family:'Press Start 2P', cursive;
}
canvas{
    display:none;
    background:#111;
    border:4px solid cyan;
    box-shadow:0 0 20px cyan;
    border-radius:10px;
}
button{
    padding:15px;
    font-family:'Press Start 2P', cursive;
    background:cyan;
    border:none;
    cursor:pointer;
}
h1,h3{
    color:cyan;
}
</style>
</head>
<body>

<div id="menu">
    <h1>ðŸ§½ CLEANMANT âš¡</h1>
    <h3>Limpieza Extrema</h3>
    <button onclick="startGame()">JUGAR</button>
</div>

<canvas id="game" width="400" height="500"></canvas>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

let level = 1;
let lives = 3;
let sponge = {x:200,y:420,size:50};
let dust = [];
let gameRunning = false;

// Crear polvo
function createDust(amount){
    dust = [];
    for(let i=0;i<amount;i++){
        dust.push({
            x:Math.random()*350+20,
            y:Math.random()*350+60,
            r:Math.random()*8+5
        });
    }
}

// Iniciar juego
function startGame(){
    document.getElementById("menu").style.display="none";
    canvas.style.display="block";
    gameRunning = true;
    level = 1;
    lives = 3;
    createDust(25); // Nivel 1: torre
}

// Movimiento mouse/tÃ¡ctil
canvas.addEventListener("mousemove", function(e){
    sponge.x = e.offsetX - 25;
    sponge.y = e.offsetY - 25;
});
canvas.addEventListener("touchmove", function(e){
    let rect = canvas.getBoundingClientRect();
    sponge.x = e.touches[0].clientX - rect.left - 25;
    sponge.y = e.touches[0].clientY - rect.top - 25;
});

// Dibujar objetos con detalle
function drawTower(){
    // Torre metÃ¡lica
    ctx.fillStyle="#222";
    ctx.fillRect(100,100,200,300);
    // Bordes
    ctx.strokeStyle="#00ffff";
    ctx.lineWidth=3;
    ctx.strokeRect(100,100,200,300);
    // Ventilador frontal
    ctx.fillStyle="#444";
    ctx.beginPath();
    ctx.arc(200,200,30,0,Math.PI*2);
    ctx.fill();
    ctx.strokeStyle="#00ffff";
    ctx.stroke();
}

function drawComputer(){
    // Base de PC
    ctx.fillStyle="#111";
    ctx.fillRect(100,120,200,150);
    // Pantalla
    ctx.fillStyle="#000";
    ctx.fillRect(110,130,180,80);
    // Brillo pantalla
    ctx.fillStyle="#0ff";
    ctx.font="10px 'Press Start 2P'";
    ctx.fillText("PC SYSTEM",130,170);
    // Teclado
    ctx.fillStyle="#333";
    ctx.fillRect(120,220,160,20);
    // Teclas
    ctx.fillStyle="#555";
    for(let i=0;i<8;i++){
        ctx.fillRect(122+i*20,222,15,15);
    }
}

function drawMouse(){
    // Base
    ctx.fillStyle="#222";
    ctx.beginPath();
    ctx.ellipse(200,250,50,30,0,0,Math.PI*2);
    ctx.fill();
    // Botones
    ctx.fillStyle="#555";
    ctx.fillRect(175,240,50,10);
    ctx.fillRect(175,255,50,10);
    // Scroll
    ctx.fillStyle="#0ff";
    ctx.fillRect(198,247,4,6);
}

// Esponja ðŸ§½ con detalle
function drawSponge(){
    let grad = ctx.createLinearGradient(sponge.x,sponge.y,sponge.x,sponge.y+sponge.size);
    grad.addColorStop(0,"#ffe066");
    grad.addColorStop(1,"#ffb703");
    ctx.fillStyle=grad;

    ctx.beginPath();
    ctx.ellipse(sponge.x+25,sponge.y+25,30,20,0,0,Math.PI*2);
    ctx.fill();

    ctx.fillStyle="#e09f3e";
    ctx.beginPath();
    ctx.ellipse(sponge.x+25,sponge.y+25,20,10,0,0,Math.PI*2);
    ctx.fill();
}

// Limpiar polvo
function checkClean(){
    dust = dust.filter(d=>{
        let dx = sponge.x+25 - d.x;
        let dy = sponge.y+25 - d.y;
        return Math.sqrt(dx*dx+dy*dy) > 30;
    });

    if(dust.length===0){
        level++;
        if(level===2) createDust(30);
        else if(level===3) createDust(35);
        else{
            alert("Â¡GANASTE CLEANMANT!");
            location.reload();
        }
    }
}

// Loop principal
function draw(){
    if(!gameRunning) return;

    ctx.clearRect(0,0,400,500);

    if(level===1) drawTower();
    else if(level===2) drawComputer();
    else drawMouse();

    // Polvo
    ctx.fillStyle="brown";
    dust.forEach(d=>{
        ctx.beginPath();
        ctx.arc(d.x,d.y,d.r,0,Math.PI*2);
        ctx.fill();
    });

    drawSponge();
    checkClean();

    // HUD
    ctx.fillStyle="cyan";
    ctx.fillText("Nivel "+level,10,30);
    ctx.fillText("Vidas "+lives,250,30);
}

setInterval(draw,30);
</script>

</body>
</html>
